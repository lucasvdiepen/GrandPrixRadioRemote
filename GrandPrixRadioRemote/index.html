<!DOCTYPE>
<html>
	<head>
		<title>Grand Prix Radio Remote</title>
		<script type="text/javascript">
			function SubmitTime() {
				let timeValue = document.getElementById("timeInput").value;
				if(!timeValue) return;
				
				document.getElementById("timeInput").value = "";

				PostData("/timechange", { time: timeValue });
			}

			function TimeBackward() {
				PostData("/timebackward");
			}

			function TimeForward() {
				PostData("/timeforward");
			}

			function Play() {
				PostData("/play");
			}

			function Pause() {
				PostData("/pause");
			}

			function Mute() {
				PostData("/mute");
			}

			function Unmute() {
				PostData("/unmute");
            }

			function PostData(url, data) {
                var xhr = new XMLHttpRequest();
				xhr.open("POST", url, true);
				if (data) {
                    xhr.setRequestHeader('Content-Type', 'application/json');
                    xhr.send(JSON.stringify(data));
					return;
                }

                xhr.send();
			}

			function VolumeChanged(value) {
				document.getElementById("volumeText").innerHTML = Math.floor(value * 100);

				PostData("/volume", { volume: value });
            }
		</script>
	</head>
	<body>
		<h2>Grand Prix Radio Remote</h2>
		<input type="button" value="Play" onclick="Play();">
		<input type="button" value="Pause" onclick="Pause();">
		<br />
		<input type="button" value="<< 0.5 Sec" onclick="TimeBackward();">
		<input type="button" value="0.5 Sec >>" onclick="TimeForward();">
		<label for="fname">Time: </label>
		<input type="text" id="timeInput"><br><br>
		<input type="button" value="Submit" onclick="SubmitTime();">
		<br /><br />
		<p>Audio:</p>
		<input type="button" value="Mute" onclick="Mute();">
		<input type="button" value="Unmute" onclick="Unmute();">
		<br /><br />
		<label>Volume: </label>
		<input type="range" min="0" max="1" step="0.05" oninput="VolumeChanged(this.value)" />
		<label id="volumeText">50</label>
	</body>
</html>